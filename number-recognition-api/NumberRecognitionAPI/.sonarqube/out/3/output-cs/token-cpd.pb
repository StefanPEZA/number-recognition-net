–:
ÖD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Controllers\V1\DatasetController.cs
	namespace 	 
NumberRecognitionAPI
 
. 
Controllers *
.* +
V1+ -
{		 
[

 

ApiVersion

 
(

 
$str

 
)

 
]

 
[ 
Route 

(
 
$str .
). /
]/ 0
[ 
ApiController 
] 
public 

class 
DatasetController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IDatasetService (
_datasetService) 8
;8 9
public 
DatasetController  
(  !
IDatasetService! 0
datasetService1 ?
)? @
{ 	
_datasetService 
= 
datasetService ,
;, -
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetDatasetWithId) 9
(9 :
[: ;
	FromRoute; D
]D E
GuidF J
idK M
)M N
{ 	
object 
response 
; 
var 
datasetEntity 
= 
await  %
_datasetService& 5
.5 6
GetDatasetAsync6 E
(E F
idF H
)H I
;I J
if 
( 
datasetEntity 
==  
null! %
)% &
{ 
response 
= 
new 
{ 
status 
= 
$str $
,$ %
message   
=   
$str   D
+  E F
id  G I
.  I J
ToString  J R
(  R S
)  S T
}!! 
;!! 
return"" 

BadRequest"" !
(""! "
response""" *
)""* +
;""+ ,
}## 
return$$ 
Ok$$ 
($$ 
datasetEntity$$ #
)$$# $
;$$$ %
}%% 	
['' 	
HttpGet''	 
('' 
$str'' 
)'' 
]''  
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
GetAllDataset(() 6
(((6 7
int((7 :
label((; @
,((@ A
[((B C
	FromQuery((C L
]((L M
int((N Q
limit((R W
=((X Y
$num((Z \
)((\ ]
{)) 	
object** 
response** 
;** 
List++ 
<++ 
Dataset++ 
>++ 
dataset++ !
=++" #
(++$ %
List++% )
<++) *
Dataset++* 1
>++1 2
)++2 3
await++3 8
_datasetService++9 H
.++H I
GetAllDatasetAsync++I [
(++[ \
label++\ a
,++a b
limit++c h
)++h i
;++i j
if,, 
(,, 
dataset,, 
==,, 
null,, 
||,,  "
dataset,,# *
.,,* +
Count,,+ 0
<=,,1 3
$num,,4 5
),,5 6
{-- 
response.. 
=.. 
new.. 
{// 
status00 
=00 
$str00 $
,00$ %
message11 
=11 
$str11 @
+11A B
label11C H
.11H I
ToString11I Q
(11Q R
)11R S
}22 
;22 
return33 

BadRequest33 !
(33! "
response33" *
)33* +
;33+ ,
}44 
return55 
Ok55 
(55 
dataset55 
)55 
;55 
}66 	
[88 	
HttpGet88	 
(88 
$str88  
)88  !
]88! "
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (
GetAllTrainDataset99) ;
(99; <
int99< ?
label99@ E
,99E F
[99G H
	FromQuery99H Q
]99Q R
int99S V
limit99W \
=99] ^
$num99_ a
)99a b
{:: 	
object;; 
response;; 
;;; 
List<< 
<<< 
Dataset<< 
><< 
dataset<< !
=<<" #
(<<$ %
List<<% )
<<<) *
Dataset<<* 1
><<1 2
)<<2 3
await<<3 8
_datasetService<<9 H
.<<H I#
GetAllTrainDatasetAsync<<I `
(<<` a
label<<a f
,<<f g
limit<<h m
)<<m n
;<<n o
if== 
(== 
dataset== 
==== 
null== 
||==  "
dataset==# *
.==* +
Count==+ 0
<===1 3
$num==4 5
)==5 6
{>> 
response?? 
=?? 
new?? 
{@@ 
statusAA 
=AA 
$strAA $
,AA$ %
messageBB 
=BB 
$strBB F
+BBG H
labelBBI N
.BBN O
ToStringBBO W
(BBW X
)BBX Y
}CC 
;CC 
returnDD 

BadRequestDD !
(DD! "
responseDD" *
)DD* +
;DD+ ,
}EE 
returnFF 
OkFF 
(FF 
datasetFF 
)FF 
;FF 
}GG 	
[II 	
HttpGetII	 
(II 
$strII 
)II  
]II  !
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (
GetAllTestDatasetJJ) :
(JJ: ;
intJJ; >
labelJJ? D
,JJD E
[JJF G
	FromQueryJJG P
]JJP Q
intJJR U
limitJJV [
=JJ\ ]
$numJJ^ `
)JJ` a
{KK 	
objectLL 
responseLL 
;LL 
ListMM 
<MM 
DatasetMM 
>MM 
datasetMM !
=MM" #
(MM$ %
ListMM% )
<MM) *
DatasetMM* 1
>MM1 2
)MM2 3
awaitMM3 8
_datasetServiceMM9 H
.MMH I"
GetAllTestDatasetAsyncMMI _
(MM_ `
labelMM` e
,MMe f
limitMMg l
)MMl m
;MMm n
ifNN 
(NN 
datasetNN 
==NN 
nullNN 
||NN  "
datasetNN# *
.NN* +
CountNN+ 0
<=NN1 3
$numNN4 5
)NN5 6
{OO 
responsePP 
=PP 
newPP 
{QQ 
statusRR 
=RR 
$strRR $
,RR$ %
messageSS 
=SS 
$strSS E
+SSF G
labelSSH M
.SSM N
ToStringSSN V
(SSV W
)SSW X
}TT 
;TT 
returnUU 

BadRequestUU !
(UU! "
responseUU" *
)UU* +
;UU+ ,
}VV 
returnWW 
OkWW 
(WW 
datasetWW 
)WW 
;WW 
}XX 	
}YY 
}ZZ «!
ÉD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Controllers\V1\ImageController.cs
	namespace 	 
NumberRecognitionAPI
 
. 
Controllers *
.* +
V1+ -
{ 
[ 

ApiVersion 
( 
$str 
) 
] 
[		 
Route		 

(		
 
$str		 ,
)		, -
]		- .
[

 
ApiController

 
]

 
public 

class 
ImageController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IImageService &
_imageService' 4
;4 5
public 
ImageController 
( 
IImageService ,
imageService- 9
)9 :
{ 	
_imageService 
= 
imageService (
;( )
} 	
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PredictImage) 5
(5 6
	IFormFile6 ?
image@ E
)E F
{ 	
object 
response 
; 
if 
( 
image 
== 
null 
||  
!! "
image" '
.' (
ContentType( 3
.3 4
Contains4 <
(< =
$str= D
)D E
)E F
{ 
response 
= 
new 
{ 
status 
= 
$str $
,$ %
message   
=   
$str   9
}!! 
;!! 
return"" 

BadRequest"" !
(""! "
response""" *
)""* +
;""+ ,
}## 
if$$ 
($$ 
image$$ 
.$$ 
Length$$ 
>$$ 
$num$$ &
)$$& '
{%% 
response&& 
=&& 
new&& 
{'' 
status(( 
=(( 
$str(( $
,(($ %
message)) 
=)) 
$str)) S
}** 
;** 
return++ 

BadRequest++ !
(++! "
response++" *
)++* +
;+++ ,
},, 
byte.. 
[.. 
].. 
image_bytes.. 
=..  
new..! $
byte..% )
[..) *
image..* /
.../ 0
Length..0 6
]..6 7
;..7 8
await// 
image// 
.// 
OpenReadStream// &
(//& '
)//' (
.//( )
	ReadAsync//) 2
(//2 3
image_bytes//3 >
,//> ?
$num//@ A
,//A B
(//C D
int//D G
)//G H
image//H M
.//M N
Length//N T
)//T U
;//U V
byte11 
[11 
,11 
]11 
processed_image11 #
=11$ %
await11& +
_imageService11, 9
.119 :
EncodeAsync11: E
(11E F
image_bytes11F Q
)11Q R
;11R S
response33 
=33 
new33 
{44 
status55 
=55 
$str55 
,55 
image_length66 
=66 
image66 $
.66$ %
Length66% +
,66+ ,
	file_name77 
=77 
image77 !
.77! "
FileName77" *
,77* +
	file_type88 
=88 
image88 !
.88! "
ContentType88" -
,88- .
predicted_label99 
=99  !
$str99" 7
,997 8
processed_image:: 
=::  !
_imageService::" /
.::/ 0
GetMatrixString::0 ?
(::? @
)::@ A
};; 
;;; 
return<< 
Ok<< 
(<< 
response<< 
)<< 
;<<  
}== 	
}?? 
}@@ Â
lD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Program.cs
	namespace

 	 
NumberRecognitionAPI


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 
ConfigureKestrel /
(/ 0
opt0 3
=>4 6
opt7 :
.: ;
Limits; A
.A B
MaxRequestBodySizeB T
=U V
nullW [
)[ \
;\ ]

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ˘%
lD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Startup.cs
	namespace 	 
NumberRecognitionAPI
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddControllers #
(# $
)$ %
;% &
services 
. 
AddApiVersioning %
(% &
options& -
=>. 0
{ 
options 
. /
#AssumeDefaultVersionWhenUnspecified ;
=< =
true> B
;B C
options 
. 
DefaultApiVersion )
=* +
new, /
	Microsoft0 9
.9 :

AspNetCore: D
.D E
MvcE H
.H I

ApiVersionI S
(S T
$numT U
,U V
$numW X
)X Y
;Y Z
options   
.   
ReportApiVersions   )
=  * +
true  , 0
;  0 1
}!! 
)!! 
;!! 
services"" 
."" 
AddSwaggerGen"" "
(""" #
c""# $
=>""% '
{## 
c$$ 
.$$ 

SwaggerDoc$$ 
($$ 
$str$$ !
,$$! "
new$$# &
OpenApiInfo$$' 2
{$$3 4
Title$$5 :
=$$; <
$str$$= S
,$$S T
Version$$U \
=$$] ^
$str$$_ c
}$$d e
)$$e f
;$$f g
}%% 
)%% 
;%% 
services&& 
.&& 
AddDbContext&& !
<&&! " 
ApplicationDbContext&&" 6
>&&6 7
(&&7 8
item&&8 <
=>&&= ?
item&&@ D
.&&D E
	UseSqlite&&E N
(&&N O
Configuration&&O \
.&&\ ]
GetConnectionString&&] p
(&&p q
$str&&q }
)&&} ~
)&&~ 
)	&& Ä
;
&&Ä Å
services'' 
.'' 
	AddScoped'' 
('' 
typeof'' %
(''% &
IRepository''& 1
<''1 2
>''2 3
)''3 4
,''4 5
typeof''6 <
(''< =

Repository''= G
<''G H
>''H I
)''I J
)''J K
;''K L
services(( 
.(( 
AddTransient(( !
<((! "
IDatasetService((" 1
,((1 2
DatasetService((3 A
>((A B
(((B C
)((C D
;((D E
services)) 
.)) 
AddTransient)) !
<))! "
IImageService))" /
,))/ 0
ImageService))1 =
>))= >
())> ?
)))? @
;))@ A
}** 	
public-- 
void-- 
	Configure-- 
(-- 
IApplicationBuilder-- 1
app--2 5
,--5 6
IWebHostEnvironment--7 J
env--K N
)--N O
{.. 	
if// 
(// 
env// 
.// 
IsDevelopment// !
(//! "
)//" #
)//# $
{00 
app11 
.11 %
UseDeveloperExceptionPage11 -
(11- .
)11. /
;11/ 0
app22 
.22 

UseSwagger22 
(22 
)22  
;22  !
app33 
.33 
UseSwaggerUI33  
(33  !
c33! "
=>33# %
c33& '
.33' (
SwaggerEndpoint33( 7
(337 8
$str338 R
,33R S
$str33T m
)33m n
)33n o
;33o p
}44 
app66 
.66 
UseHttpsRedirection66 #
(66# $
)66$ %
;66% &
app88 
.88 

UseRouting88 
(88 
)88 
;88 
app:: 
.:: 
UseAuthorization::  
(::  !
)::! "
;::" #
app<< 
.<< 
UseEndpoints<< 
(<< 
	endpoints<< &
=><<' )
{== 
	endpoints>> 
.>> 
MapControllers>> (
(>>( )
)>>) *
;>>* +
}?? 
)?? 
;?? 
}@@ 	
}AA 
}BB 