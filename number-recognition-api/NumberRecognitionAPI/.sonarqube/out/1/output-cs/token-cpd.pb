à
‚C:\Users\stefa\Documents\GitHub\fraud-detection-net\number-recognition-api\NumberRecognitionAPI\Repository\ApplicationDbContext.cs
	namespace		 	

Repository		
 
{

 
public 

class  
ApplicationDbContext %
:% &
	DbContext' 0
{ 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
options5 <
)< =
:> ?
base@ D
(D E
optionsE L
)L M
{ 	
} 	
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /

DatasetMap0 :
(: ;
); <
)< =
;= >
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
} 	
} 
} Ÿ
šC:\Users\stefa\Documents\GitHub\fraud-detection-net\number-recognition-api\NumberRecognitionAPI\Repository\Migrations\20211108091052_CreateDatasetTable.cs
	namespace 	

Repository
 
. 

Migrations 
{ 
public 

partial 
class 
CreateDatasetTable +
:, -
	Migration. 7
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
CreateTable

 (
(

( )
name 
: 
$str 
,  
columns 
: 
table 
=> !
new" %
{ 
id 
= 
table 
. 
Column %
<% &
Guid& *
>* +
(+ ,
type, 0
:0 1
$str2 D
,D E
nullableF N
:N O
falseP U
)U V
,V W
label 
= 
table !
.! "
Column" (
<( )
int) ,
>, -
(- .
type. 2
:2 3
$str4 9
,9 :
nullable; C
:C D
falseE J
)J K
,K L
image 
= 
table !
.! "
Column" (
<( )
byte) -
[- .
]. /
>/ 0
(0 1
type1 5
:5 6
$str7 =
,= >
nullable? G
:G H
trueI M
)M N
,N O
is_test 
= 
table #
.# $
Column$ *
<* +
bool+ /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 3
,3 4
x5 6
=>7 9
x: ;
.; <
id< >
)> ?
;? @
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
)  
;  !
} 	
} 
} ‹
„C:\Users\stefa\Documents\GitHub\fraud-detection-net\number-recognition-api\NumberRecognitionAPI\Repository\Repository\IRepository.cs
	namespace 	

Repository
 
. 

Repository 
{ 
public 

	interface 
IRepository  
<  !
T! "
>" #
where$ )
T* +
:+ ,

BaseEntity, 6
{		 
Task

 
<

 
IEnumerable

 
<

 
T

 
>

 
>

 
GetAllAsync

 (
(

( )
int

) ,
limit

- 2
=

3 4
$num

5 7
,

7 8
Func

9 =
<

= >
T

> ?
,

? @
bool

A E
>

E F
filter

G M
=

N O
null

P T
)

T U
;

U V
Task 
< 
T 
> 
GetByIdAsync 
( 
Guid !
id" $
)$ %
;% &
Task 
InsertAsync 
( 
T 
entity !
)! "
;" #
Task 
UpdateAsync 
( 
T 
entity !
)! "
;" #
Task 
DeleteAsync 
( 
T 
entity !
)! "
;" #
} 
} Ã(
ƒC:\Users\stefa\Documents\GitHub\fraud-detection-net\number-recognition-api\NumberRecognitionAPI\Repository\Repository\Repository.cs
	namespace 	

Repository
 
. 

Repository 
{		 
public

 

class

 

Repository

 
<

 
T

 
>

 
:

  
IRepository

! ,
<

, -
T

- .
>

. /
where

0 5
T

6 7
:

8 9

BaseEntity

: D
{ 
private 
readonly  
ApplicationDbContext -!
_applicationDbContext. C
;C D
private 
readonly 
DbSet 
< 
T  
>  !
entities" *
;* +
public 

Repository 
(  
ApplicationDbContext . 
applicationDbContext/ C
)C D
{ 	!
_applicationDbContext !
=" # 
applicationDbContext$ 8
;8 9
entities 
= !
_applicationDbContext ,
., -
Set- 0
<0 1
T1 2
>2 3
(3 4
)4 5
;5 6
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
T& '
>' (
>( )
GetAllAsync* 5
(5 6
int6 9
limit: ?
=@ A
$numB D
,D E
FuncF J
<J K
TK L
,L M
boolN R
>R S
filterT Z
=[ \
null] a
)a b
{ 	
if 
( 
filter 
== 
null 
) 
{ 
filter 
= 
x 
=> 
true "
;" #
} 
return 
await 
Task 
. 
Run !
(! "
entities" *
.* +
Where+ 0
<0 1
T1 2
>2 3
(3 4
filter4 :
): ;
.; <
Take< @
<@ A
TA B
>B C
(C D
limitD I
)I J
.J K
ToListK Q
)Q R
;R S
} 	
public 
async 
Task 
< 
T 
> 
GetByIdAsync )
() *
Guid* .
id/ 1
)1 2
{ 	
return   
await   
entities   !
.  ! " 
SingleOrDefaultAsync  " 6
(  6 7
x  7 8
=>  9 ;
x  < =
.  = >
Id  > @
==  A C
id  D F
)  F G
;  G H
}!! 	
public## 
async## 
Task## 
InsertAsync## %
(##% &
T##& '
entity##( .
)##. /
{$$ 	
if%% 
(%% 
entity%% 
==%% 
null%% 
)%% 
{&& 
throw'' 
new'' !
ArgumentNullException'' /
(''/ 0
nameof''0 6
(''6 7
entity''7 =
)''= >
)''> ?
;''? @
}(( 
entities)) 
.)) 
Add)) 
()) 
entity)) 
)))  
;))  !
await** !
_applicationDbContext** '
.**' (
SaveChangesAsync**( 8
(**8 9
)**9 :
;**: ;
}++ 	
public-- 
async-- 
Task-- 
UpdateAsync-- %
(--% &
T--& '
entity--( .
)--. /
{.. 	
if// 
(// 
entity// 
==// 
null// 
)// 
{00 
throw11 
new11 !
ArgumentNullException11 /
(11/ 0
nameof110 6
(116 7
entity117 =
)11= >
)11> ?
;11? @
}22 
entities33 
.33 
Update33 
(33 
entity33 "
)33" #
;33# $
await44 !
_applicationDbContext44 '
.44' (
SaveChangesAsync44( 8
(448 9
)449 :
;44: ;
}55 	
public77 
async77 
Task77 
DeleteAsync77 %
(77% &
T77& '
entity77( .
)77. /
{88 	
if99 
(99 
entity99 
==99 
null99 
)99 
{:: 
throw;; 
new;; !
ArgumentNullException;; /
(;;/ 0
nameof;;0 6
(;;6 7
entity;;7 =
);;= >
);;> ?
;;;? @
}<< 
entities== 
.== 
Remove== 
(== 
entity== "
)==" #
;==# $
await>> !
_applicationDbContext>> '
.>>' (
SaveChangesAsync>>( 8
(>>8 9
)>>9 :
;>>: ;
}?? 	
}@@ 
}AA 