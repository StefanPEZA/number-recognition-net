æt
ÖD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Controllers\V1\DatasetController.cs
	namespace		 	 
NumberRecognitionAPI		
 
.		 
Controllers		 *
.		* +
V1		+ -
{

 
[ 

ApiVersion 
( 
$str 
) 
] 
[ 
Route 

(
 
$str .
). /
]/ 0
[ 
ApiController 
] 
public 

class 
DatasetController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IDatasetService (
_datasetService) 8
;8 9
public 
DatasetController  
(  !
IDatasetService! 0
datasetService1 ?
)? @
{ 	
_datasetService 
= 
datasetService ,
;, -
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetDatasetWithId) 9
(9 :
[: ;
	FromRoute; D
]D E
GuidF J
idK M
)M N
{ 	
object 
response 
; 
var 
datasetEntity 
= 
await  %
_datasetService& 5
.5 6
GetDatasetAsync6 E
(E F
idF H
)H I
;I J
if 
( 
datasetEntity 
==  
null! %
)% &
{ 
response 
= 
new 
{ 
status   
=   
$str   $
,  $ %
message!! 
=!! 
$str!! D
+!!E F
id!!G I
.!!I J
ToString!!J R
(!!R S
)!!S T
}"" 
;"" 
return## 

BadRequest## !
(##! "
response##" *
)##* +
;##+ ,
}$$ 
response%% 
=%% 
new%% 
{&& 
status'' 
='' 
$str'' 
,'' 
dataset(( 
=(( 
datasetEntity(( '
})) 
;)) 
return** 
Ok** 
(** 
response** 
)** 
;**  
}++ 	
[-- 	
HttpGet--	 
(-- 
$str-- 
)-- 
]--  
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (
GetAllDataset..) 6
(..6 7
string..7 =
label..> C
,..C D
[..E F
	FromQuery..F O
]..O P
int..Q T
limit..U Z
=..[ \
$num..] _
).._ `
{// 	
object00 
response00 
;00 
List11 
<11 
Dataset11 
>11 
dataset11 !
=11" #
(11$ %
List11% )
<11) *
Dataset11* 1
>111 2
)112 3
await113 8
_datasetService119 H
.11H I
GetAllDatasetAsync11I [
(11[ \
label11\ a
,11a b
limit11c h
)11h i
;11i j
if22 
(22 
dataset22 
==22 
null22 
||22  "
dataset22# *
.22* +
Count22+ 0
<=221 3
$num224 5
)225 6
{33 
response44 
=44 
new44 
{55 
status66 
=66 
$str66 $
,66$ %
message77 
=77 
$str77 @
+77A B
label77C H
.77H I
ToString77I Q
(77Q R
)77R S
}88 
;88 
return99 

BadRequest99 !
(99! "
response99" *
)99* +
;99+ ,
}:: 
response;; 
=;; 
new;; 
{<< 
status== 
=== 
$str== 
,== 
datasets>> 
=>> 
dataset>> "
}?? 
;?? 
return@@ 
Ok@@ 
(@@ 
response@@ 
)@@ 
;@@  
}AA 	
[CC 	
HttpGetCC	 
(CC 
$strCC  
)CC  !
]CC! "
publicDD 
asyncDD 
TaskDD 
<DD 
IActionResultDD '
>DD' (
GetAllTrainDatasetDD) ;
(DD; <
stringDD< B
labelDDC H
,DDH I
[DDJ K
	FromQueryDDK T
]DDT U
intDDV Y
limitDDZ _
=DD` a
$numDDb d
)DDd e
{EE 	
objectFF 
responseFF 
;FF 
ListGG 
<GG 
DatasetGG 
>GG 
datasetGG !
=GG" #
(GG$ %
ListGG% )
<GG) *
DatasetGG* 1
>GG1 2
)GG2 3
awaitGG3 8
_datasetServiceGG9 H
.GGH I#
GetAllTrainDatasetAsyncGGI `
(GG` a
labelGGa f
,GGf g
limitGGh m
)GGm n
;GGn o
ifHH 
(HH 
datasetHH 
==HH 
nullHH 
||HH  "
datasetHH# *
.HH* +
CountHH+ 0
<=HH1 3
$numHH4 5
)HH5 6
{II 
responseJJ 
=JJ 
newJJ 
{KK 
statusLL 
=LL 
$strLL $
,LL$ %
messageMM 
=MM 
$strMM F
+MMG H
labelMMI N
.MMN O
ToStringMMO W
(MMW X
)MMX Y
}NN 
;NN 
returnOO 

BadRequestOO !
(OO! "
responseOO" *
)OO* +
;OO+ ,
}PP 
responseQQ 
=QQ 
newQQ 
{RR 
statusSS 
=SS 
$strSS 
,SS 
datasetsTT 
=TT 
datasetTT "
}UU 
;UU 
returnVV 
OkVV 
(VV 
responseVV 
)VV 
;VV  
}WW 	
[YY 	
HttpGetYY	 
(YY 
$strYY 
)YY  
]YY  !
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (
GetAllTestDatasetZZ) :
(ZZ: ;
stringZZ; A
labelZZB G
,ZZG H
[ZZI J
	FromQueryZZJ S
]ZZS T
intZZU X
limitZZY ^
=ZZ_ `
$numZZa c
)ZZc d
{[[ 	
object\\ 
response\\ 
;\\ 
List]] 
<]] 
Dataset]] 
>]] 
dataset]] !
=]]" #
(]]$ %
List]]% )
<]]) *
Dataset]]* 1
>]]1 2
)]]2 3
await]]3 8
_datasetService]]9 H
.]]H I"
GetAllTestDatasetAsync]]I _
(]]_ `
label]]` e
,]]e f
limit]]g l
)]]l m
;]]m n
if^^ 
(^^ 
dataset^^ 
==^^ 
null^^ 
||^^  "
dataset^^# *
.^^* +
Count^^+ 0
<=^^1 3
$num^^4 5
)^^5 6
{__ 
response`` 
=`` 
new`` 
{aa 
statusbb 
=bb 
$strbb $
,bb$ %
messagecc 
=cc 
$strcc E
+ccF G
labelccH M
.ccM N
ToStringccN V
(ccV W
)ccW X
}dd 
;dd 
returnee 

BadRequestee !
(ee! "
responseee" *
)ee* +
;ee+ ,
}ff 
responsegg 
=gg 
newgg 
{hh 
statusii 
=ii 
$strii 
,ii 
datasetsjj 
=jj 
datasetjj "
}kk 
;kk 
returnll 
Okll 
(ll 
responsell 
)ll 
;ll  
}mm 	
privateoo 
asyncoo 
Taskoo 
<oo 
Datasetoo "
>oo" #
AddToDatasetoo$ 0
(oo0 1
booloo1 5
isTestoo6 <
,oo< =
stringoo> D
labelooE J
,ooJ K
byteooL P
[ooP Q
]ooQ R
image_bytesooS ^
)oo^ _
{pp 	
Datasetqq 
datasetqq 
=qq 
newqq !
Datasetqq" )
(qq) *
)qq* +
{rr 
Labelss 
=ss 
labelss 
,ss 
ImageMatrixtt 
=tt 
image_bytestt )
,tt) *
IsTestuu 
=uu 
isTestuu 
}vv 
;vv 
awaitww 
_datasetServiceww !
.ww! "
InsertIntoDatasetww" 3
(ww3 4
datasetww4 ;
)ww; <
;ww< =
returnxx 
datasetxx 
;xx 
}yy 	
[{{ 	
HttpPost{{	 
({{ 
$str{{  
){{  !
]{{! "
public|| 
async|| 
Task|| 
<|| 
IActionResult|| '
>||' (
AddTestDataset||) 7
(||7 8
string||8 >
label||? D
,||D E
	IFormFile||F O
image||P U
)||U V
{}} 	
object~~ 
response~~ 
;~~ 
bool 
valid 
; 
(
ÄÄ 
valid
ÄÄ 
,
ÄÄ 
response
ÄÄ 
)
ÄÄ 
=
ÄÄ 
Shared
ÄÄ  &
.
ÄÄ& '!
CheckIfIsValidImage
ÄÄ' :
(
ÄÄ: ;
image
ÄÄ; @
)
ÄÄ@ A
;
ÄÄA B
if
ÅÅ 
(
ÅÅ 
!
ÅÅ 
valid
ÅÅ 
)
ÅÅ 
{
ÇÇ 
return
ÉÉ 

BadRequest
ÉÉ !
(
ÉÉ! "
response
ÉÉ" *
)
ÉÉ* +
;
ÉÉ+ ,
}
ÑÑ 
byte
ÖÖ 
[
ÖÖ 
]
ÖÖ 
image_bytes
ÖÖ 
=
ÖÖ  
await
ÖÖ! &
Shared
ÖÖ' -
.
ÖÖ- ."
IFormFileToByteArray
ÖÖ. B
(
ÖÖB C
image
ÖÖC H
)
ÖÖH I
;
ÖÖI J
Dataset
ÜÜ 
dataset
ÜÜ 
=
ÜÜ 
await
ÜÜ #
AddToDataset
ÜÜ$ 0
(
ÜÜ0 1
true
ÜÜ1 5
,
ÜÜ5 6
label
ÜÜ7 <
,
ÜÜ< =
image_bytes
ÜÜ> I
)
ÜÜI J
;
ÜÜJ K
response
àà 
=
àà 
new
àà 
{
ââ 
status
ää 
=
ää 
$str
ää 
,
ää 
dataset
ãã 
=
ãã 
dataset
ãã !
}
åå 
;
åå 
return
çç 
Ok
çç 
(
çç 
response
çç 
)
çç 
;
çç  
}
éé 	
[
êê 	
HttpPost
êê	 
(
êê 
$str
êê !
)
êê! "
]
êê" #
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
IActionResult
ëë '
>
ëë' (
AddTrainDataset
ëë) 8
(
ëë8 9
string
ëë9 ?
label
ëë@ E
,
ëëE F
	IFormFile
ëëG P
image
ëëQ V
)
ëëV W
{
íí 	
object
ìì 
response
ìì 
;
ìì 
bool
îî 
valid
îî 
;
îî 
(
ïï 
valid
ïï 
,
ïï 
response
ïï 
)
ïï 
=
ïï 
Shared
ïï  &
.
ïï& '!
CheckIfIsValidImage
ïï' :
(
ïï: ;
image
ïï; @
)
ïï@ A
;
ïïA B
if
ññ 
(
ññ 
!
ññ 
valid
ññ 
)
ññ 
{
óó 
return
òò 

BadRequest
òò !
(
òò! "
response
òò" *
)
òò* +
;
òò+ ,
}
ôô 
byte
öö 
[
öö 
]
öö 
image_bytes
öö 
=
öö  
await
öö! &
Shared
öö' -
.
öö- ."
IFormFileToByteArray
öö. B
(
ööB C
image
ööC H
)
ööH I
;
ööI J
Dataset
õõ 
dataset
õõ 
=
õõ 
await
õõ #
AddToDataset
õõ$ 0
(
õõ0 1
false
õõ1 6
,
õõ6 7
label
õõ8 =
,
õõ= >
image_bytes
õõ? J
)
õõJ K
;
õõK L
response
ùù 
=
ùù 
new
ùù 
{
ûû 
status
üü 
=
üü 
$str
üü 
,
üü 
dataset
†† 
=
†† 
dataset
†† !
}
°° 
;
°° 
return
¢¢ 
Ok
¢¢ 
(
¢¢ 
response
¢¢ 
)
¢¢ 
;
¢¢  
}
££ 	
[
•• 	

HttpDelete
••	 
(
•• 
$str
•• 
)
•• 
]
•• 
public
¶¶ 
async
¶¶ 
Task
¶¶ 
<
¶¶ 
IActionResult
¶¶ '
>
¶¶' (!
DeleteDatasetWithId
¶¶) <
(
¶¶< =
Guid
¶¶= A
id
¶¶B D
)
¶¶D E
{
ßß 	
object
®® 
response
®® 
;
®® 
bool
©© 
result
©© 
=
©© 
await
©© 
_datasetService
©©  /
.
©©/ 0$
DeleteFromDatasetAsync
©©0 F
(
©©F G
id
©©G I
)
©©I J
;
©©J K
if
™™ 
(
™™ 
!
™™ 
result
™™ 
)
™™ 
{
´´ 
response
¨¨ 
=
¨¨ 
new
¨¨ 
{
≠≠ 
status
ÆÆ 
=
ÆÆ 
$str
ÆÆ $
,
ÆÆ$ %
message
ØØ 
=
ØØ 
$str
ØØ D
+
ØØE F
id
ØØG I
.
ØØI J
ToString
ØØJ R
(
ØØR S
)
ØØS T
}
∞∞ 
;
∞∞ 
return
±± 

BadRequest
±± !
(
±±! "
response
±±" *
)
±±* +
;
±±+ ,
}
≤≤ 
response
¥¥ 
=
¥¥ 
new
¥¥ 
{
µµ 
status
∂∂ 
=
∂∂ 
$str
∂∂ 
,
∂∂ 
dataset
∑∑ 
=
∑∑ 
result
∑∑  
}
∏∏ 
;
∏∏ 
return
ππ 
Ok
ππ 
(
ππ 
response
ππ 
)
ππ 
;
ππ  
}
∫∫ 	
}
ªª 
}ºº íG
ÉD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Controllers\V1\ImageController.cs
	namespace		 	 
NumberRecognitionAPI		
 
.		 
Controllers		 *
.		* +
V1		+ -
{

 
[ 

ApiVersion 
( 
$str 
) 
] 
[ 
Route 

(
 
$str ,
), -
]- .
[ 
ApiController 
] 
public 

class 
ImageController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IImageService &
_imageService' 4
;4 5
public 
ImageController 
( 
IImageService ,
imageService- 9
)9 :
{ 	
_imageService 
= 
imageService (
;( )
} 	
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PredictImage) 5
(5 6
	IFormFile6 ?
image@ E
)E F
{ 	
object 
response 
; 
bool 
valid 
; 
( 
valid 
, 
response 
) 
= 
Shared  &
.& '
CheckIfIsValidImage' :
(: ;
image; @
)@ A
;A B
if   
(   
!   
valid   
)   
{!! 
return"" 

BadRequest"" !
(""! "
response""" *
)""* +
;""+ ,
}## 
byte%% 
[%% 
]%% 
image_bytes%% 
=%%  
await%%! &
Shared%%' -
.%%- . 
IFormFileToByteArray%%. B
(%%B C
image%%C H
)%%H I
;%%I J
float'' 

prediction'' 
='' 
await'' $
_imageService''% 2
.''2 3
Predict''3 :
('': ;
image_bytes''; F
)''F G
;''G H
response)) 
=)) 
new)) 
{** 
status++ 
=++ 
$str++ 
,++ 
image_length,, 
=,, 
image,, $
.,,$ %
Length,,% +
,,,+ ,
	file_name-- 
=-- 
image-- !
.--! "
FileName--" *
,--* +
	file_type.. 
=.. 
image.. !
...! "
ContentType.." -
,..- .
predicted_label// 
=//  !

prediction//" ,
.//, -
ToString//- 5
(//5 6
)//6 7
,//7 8
}00 
;00 
return11 
Ok11 
(11 
response11 
)11 
;11  
}22 	
[44 	
HttpPost44	 
]44 
[55 	
Route55	 
(55 
$str55 
)55 
]55 
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
ResizeImage66) 4
(664 5
	IFormFile665 >
image66? D
,66D E
int66F I
width66J O
,66O P
int66Q T
height66U [
)66[ \
{77 	
object88 
response88 
;88 
bool99 
valid99 
;99 
(:: 
valid:: 
,:: 
response:: 
):: 
=:: 
Shared::  &
.::& '
CheckIfIsValidImage::' :
(::: ;
image::; @
)::@ A
;::A B
if;; 
(;; 
!;; 
valid;; 
);; 
{<< 
return== 

BadRequest== !
(==! "
response==" *
)==* +
;==+ ,
}>> 
byte@@ 
[@@ 
]@@ 
image_bytes@@ 
=@@  
await@@! &
Shared@@' -
.@@- . 
IFormFileToByteArray@@. B
(@@B C
image@@C H
)@@H I
;@@I J
byteAA 
[AA 
]AA 
processed_imageAA "
=AA# $
awaitAA% *
_imageServiceAA+ 8
.AA8 9
ResizeAA9 ?
(AA? @
image_bytesAA@ K
,AAK L
widthAAL Q
,AAQ R
heightAAR X
)AAX Y
;AAY Z
responseCC 
=CC 
newCC 
{DD 
statusEE 
=EE 
$strEE 
,EE 
processed_imageFF 
=FF  !
processed_imageFF" 1
,FF1 2
original_imageGG 
=GG  
image_bytesGG! ,
,GG, -
}HH 
;HH 
returnII 
OkII 
(II 
responseII 
)II 
;II  
}JJ 	
[LL 	
HttpPostLL	 
]LL 
[MM 	
RouteMM	 
(MM 
$strMM 
)MM 
]MM 
publicNN 
asyncNN 
TaskNN 
<NN 
IActionResultNN '
>NN' (
	CropImageNN) 2
(NN2 3
	IFormFileNN3 <
imageNN= B
)NNB C
{OO 	
objectPP 
responsePP 
;PP 
boolQQ 
validQQ 
;QQ 
(RR 
validRR 
,RR 
responseRR 
)RR 
=RR 
SharedRR  &
.RR& '
CheckIfIsValidImageRR' :
(RR: ;
imageRR; @
)RR@ A
;RRA B
ifSS 
(SS 
!SS 
validSS 
)SS 
{TT 
returnUU 

BadRequestUU !
(UU! "
responseUU" *
)UU* +
;UU+ ,
}VV 
byteXX 
[XX 
]XX 
image_bytesXX 
=XX  
awaitXX! &
SharedXX' -
.XX- . 
IFormFileToByteArrayXX. B
(XXB C
imageXXC H
)XXH I
;XXI J
byteYY 
[YY 
]YY 
processed_imageYY "
=YY# $
awaitYY% *
_imageServiceYY+ 8
.YY8 9
CropYY9 =
(YY= >
image_bytesYY> I
)YYI J
;YYJ K
response[[ 
=[[ 
new[[ 
{\\ 
status]] 
=]] 
$str]] 
,]] 
processed_image^^ 
=^^  !
processed_image^^" 1
,^^1 2
original_image__ 
=__  
image_bytes__! ,
,__, -
}`` 
;`` 
returnaa 
Okaa 
(aa 
responseaa 
)aa 
;aa  
}bb 	
[dd 	
HttpPostdd	 
]dd 
[ee 	
Routeee	 
(ee 
$stree 
)ee 
]ee 
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' (

SplitImageff) 3
(ff3 4
	IFormFileff4 =
imageff> C
)ffC D
{gg 	
objecthh 
responsehh 
;hh 
boolii 
validii 
;ii 
(jj 
validjj 
,jj 
responsejj 
)jj 
=jj 
Sharedjj  &
.jj& '
CheckIfIsValidImagejj' :
(jj: ;
imagejj; @
)jj@ A
;jjA B
ifkk 
(kk 
!kk 
validkk 
)kk 
{ll 
returnmm 

BadRequestmm !
(mm! "
responsemm" *
)mm* +
;mm+ ,
}nn 
bytepp 
[pp 
]pp 
image_bytespp 
=pp  
awaitpp! &
Sharedpp' -
.pp- . 
IFormFileToByteArraypp. B
(ppB C
imageppC H
)ppH I
;ppI J
Listqq 
<qq 
byteqq 
[qq 
]qq 
>qq 
processed_imageqq (
=qq) *
awaitqq+ 0
_imageServiceqq1 >
.qq> ?
Splitqq? D
(qqD E
image_bytesqqE P
)qqP Q
;qqQ R
responsess 
=ss 
newss 
{tt 
statusuu 
=uu 
$struu 
,uu 
processed_imagevv 
=vv  !
processed_imagevv" 1
.vv1 2
ToArrayvv2 9
(vv9 :
)vv: ;
,vv; <
original_imageww 
=ww  
image_bytesww! ,
,ww, -
}xx 
;xx 
returnyy 
Okyy 
(yy 
responseyy 
)yy 
;yy  
}zz 	
}|| 
}}} ˘
lD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Program.cs
	namespace

 	 
NumberRecognitionAPI


 
{ 
public 

static 
class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 
ConfigureKestrel /
(/ 0
opt0 3
=>4 6
opt7 :
.: ;
Limits; A
.A B
MaxRequestBodySizeB T
=U V
nullW [
)[ \
;\ ]

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} Ä+
lD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Startup.cs
	namespace 	 
NumberRecognitionAPI
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddCors 
( 
options $
=>% '
{ 
options 
. 
	AddPolicy !
(! "
name" &
:& '
$str( .
,. /
builder" )
=>* ,
{" #
builder  & -
.  - .
WithOrigins  . 9
(  9 :
$str  : =
)  = >
;  > ?
}!!" #
)!!# $
;!!$ %
}"" 
)"" 
;"" 
services## 
.## 
AddControllers## #
(### $
)##$ %
;##% &
services$$ 
.$$ 
AddApiVersioning$$ %
($$% &
options$$& -
=>$$. 0
{%% 
options&& 
.&& /
#AssumeDefaultVersionWhenUnspecified&& ;
=&&< =
true&&> B
;&&B C
options'' 
.'' 
DefaultApiVersion'' )
=''* +
new'', /
	Microsoft''0 9
.''9 :

AspNetCore'': D
.''D E
Mvc''E H
.''H I

ApiVersion''I S
(''S T
$num''T U
,''U V
$num''W X
)''X Y
;''Y Z
options(( 
.(( 
ReportApiVersions(( )
=((* +
true((, 0
;((0 1
})) 
))) 
;)) 
services** 
.** 
AddSwaggerGen** "
(**" #
c**# $
=>**% '
{++ 
c,, 
.,, 

SwaggerDoc,, 
(,, 
$str,, !
,,,! "
new,,# &
OpenApiInfo,,' 2
{,,3 4
Title,,5 :
=,,; <
$str,,= S
,,,S T
Version,,U \
=,,] ^
$str,,_ c
},,d e
),,e f
;,,f g
}-- 
)-- 
;-- 
services.. 
... 
AddDbContext.. !
<..! " 
ApplicationDbContext.." 6
>..6 7
(..7 8
item..8 <
=>..= ?
item..@ D
...D E
	UseSqlite..E N
(..N O
Configuration..O \
...\ ]
GetConnectionString..] p
(..p q
$str..q }
)..} ~
)..~ 
)	.. Ä
;
..Ä Å
services// 
.// 
	AddScoped// 
(// 
typeof// %
(//% &
IRepository//& 1
<//1 2
>//2 3
)//3 4
,//4 5
typeof//6 <
(//< =

Repository//= G
<//G H
>//H I
)//I J
)//J K
;//K L
services00 
.00 
AddTransient00 !
<00! "
IDatasetService00" 1
,001 2
DatasetService003 A
>00A B
(00B C
)00C D
;00D E
services11 
.11 
AddTransient11 !
<11! "
IImageService11" /
,11/ 0
ImageService111 =
>11= >
(11> ?
)11? @
;11@ A
}22 	
public55 
void55 
	Configure55 
(55 
IApplicationBuilder55 1
app552 5
,555 6
IWebHostEnvironment557 J
env55K N
)55N O
{66 	
if77 
(77 
env77 
.77 
IsDevelopment77 !
(77! "
)77" #
)77# $
{88 
app99 
.99 %
UseDeveloperExceptionPage99 -
(99- .
)99. /
;99/ 0
app:: 
.:: 

UseSwagger:: 
(:: 
)::  
;::  !
app;; 
.;; 
UseSwaggerUI;;  
(;;  !
c;;! "
=>;;# %
c;;& '
.;;' (
SwaggerEndpoint;;( 7
(;;7 8
$str;;8 R
,;;R S
$str;;T m
);;m n
);;n o
;;;o p
}<< 
app>> 
.>> 
UseCors>> 
(>> 
$str>> 
)>> 
;>>  
app@@ 
.@@ 
UseHttpsRedirection@@ #
(@@# $
)@@$ %
;@@% &
appBB 
.BB 

UseRoutingBB 
(BB 
)BB 
;BB 
appDD 
.DD 
UseAuthorizationDD  
(DD  !
)DD! "
;DD" #
appFF 
.FF 
UseEndpointsFF 
(FF 
	endpointsFF &
=>FF' )
{GG 
	endpointsHH 
.HH 
MapControllersHH (
(HH( )
)HH) *
;HH* +
}II 
)II 
;II 
}JJ 	
}KK 
}LL ‚
qD:\Github\number-recognition-net\number-recognition-api\NumberRecognitionAPI\NumberRecognitionAPI\Utils\Shared.cs
	namespace 	 
NumberRecognitionAPI
 
. 
Utils $
{ 
public 

static 
class 
Shared 
{ 
public		 
static		 
async		 
Task		  
<		  !
byte		! %
[		% &
]		& '
>		' ( 
IFormFileToByteArray		) =
(		= >
	IFormFile		> G
image		H M
)		M N
{

 	
Memory 
< 
byte 
> 
image_bytes $
=% &
new' *
Memory+ 1
<1 2
byte2 6
>6 7
(7 8
new8 ;
byte< @
[@ A
imageA F
.F G
LengthG M
]M N
)N O
;O P
await 
image 
. 
OpenReadStream &
(& '
)' (
.( )
	ReadAsync) 2
(2 3
image_bytes3 >
)> ?
;? @
return 
image_bytes 
. 
ToArray &
(& '
)' (
;( )
} 	
public 
static 
( 
bool 
, 
object "
)" #
CheckIfIsValidImage$ 7
(7 8
	IFormFile8 A
imageB G
)G H
{ 	
object 
response 
; 
if 
( 
image 
== 
null 
||  
!! "
image" '
.' (
ContentType( 3
.3 4
Contains4 <
(< =
$str= D
)D E
)E F
{ 
response 
= 
new 
{ 
status 
= 
$str $
,$ %
message 
= 
$str 9
} 
; 
return 
( 
false 
, 
response '
)' (
;( )
} 
if 
( 
image 
. 
Length 
> 
$num &
)& '
{ 
response 
= 
new 
{ 
status   
=   
$str   $
,  $ %
message!! 
=!! 
$str!! S
}"" 
;"" 
return## 
(## 
false## 
,## 
response## '
)##' (
;##( )
}$$ 
return%% 
(%% 
true%% 
,%% 
null%% 
)%% 
;%%  
}&& 	
}'' 
}(( 